# מערכת ניהול משווקים - Affiliate Marketing System

מערכת לניהול משווקים ומעקב אחר מכירות עם אבטחת מנהלים פשוטה.

## 🔐 אבטחה

- **דף ניהול** (`index.html`) - גישה למנהלים בלבד (לפי אימייל)
- **דף משווק** (`marketer.html`) - נגיש לכל משווק עם הקישור שלו
- **דף התחברות** (`login.html`) - התחברות פשוטה עם אימייל בלבד

## 📦 התקנה

### שלב 1: הגדרת Supabase

1. היכנס ל-[Supabase Dashboard](https://supabase.com/dashboard)
2. פתח את הפרויקט שלך
3. לך ל-**SQL Editor**
4. הרץ את קובץ ה-SQL: `supabase_schema.sql`

### שלב 2: הוספת מנהלים

1. פתח את קובץ `add_admin.sql`
2. שנה את האימייל `'your-admin@email.com'` לאימייל המנהל שלך
3. הרץ את ה-SQL ב-Supabase SQL Editor

דוגמה:
```sql
INSERT INTO admins (email) 
VALUES ('admin@example.com')
ON CONFLICT (email) DO NOTHING;
```

## 🗄️ מבנה הטבלאות

### admins
| שדה | סוג | תיאור |
|------|------|--------|
| id | UUID | מזהה ייחודי |
| email | TEXT | אימייל המנהל |
| created_at | TIMESTAMP | תאריך יצירה |

### marketers
| שדה | סוג | תיאור |
|------|------|--------|
| id | BIGSERIAL | מזהה ייחודי |
| name | TEXT | שם המשווק |
| link | TEXT | קישור הפניה |
| sales | INTEGER | מספר מכירות |
| commission | DECIMAL | סכום עמלה |
| created_at | TIMESTAMP | תאריך יצירה |
| updated_at | TIMESTAMP | תאריך עדכון |

### settings
| שדה | סוג | תיאור |
|------|------|--------|
| id | UUID | מזהה ייחודי |
| key | TEXT | מפתח ההגדרה |
| value | TEXT | ערך ההגדרה |
| updated_at | TIMESTAMP | תאריך עדכון |

## 📁 קבצים

| קובץ | תיאור |
|------|--------|
| `index.html` | דף ניהול משווקים (למנהלים בלבד) |
| `marketer.html` | דף צפייה למשווקים |
| `login.html` | דף התחברות מנהלים (אימייל בלבד) |
| `supabase_schema.sql` | סכמת מסד הנתונים |
| `add_admin.sql` | סקריפט להוספת מנהלים |

## 🔧 איך זה עובד

1. **התחברות**: המנהל מכניס את האימייל שלו
2. **בדיקה**: המערכת בודקת אם האימייל קיים בטבלת `admins`
3. **גישה**: אם כן - נכנס לדף הניהול, אם לא - מקבל הודעת שגיאה

## 🔧 פתרון בעיות

### "האימייל הזה לא מורשה לגשת למערכת הניהול"
- וודא שהאימייל שלך קיים בטבלת `admins`
- וודא שהאימייל מוקלד נכון (אותיות קטנות)

### "משווק לא נמצא"
- וודא שה-ID בכתובת ה-URL נכון
- וודא שהמשווק קיים בטבלת `marketers`

## 🚀 שימוש

1. הכנס את האימייל שלך בדף `login.html`
2. הוסף משווקים חדשים עם שם וקישור הפניה
3. שתף עם כל משווק את הקישור לדף שלו: `marketer.html?id=XXX`
4. עקוב אחר מכירות ועדכן עמלות

## 📞 תמיכה

לשאלות ובעיות, פנה למנהל המערכת.
